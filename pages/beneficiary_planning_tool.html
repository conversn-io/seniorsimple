<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Beneficiary Planning Tool - RetireSafe.ly</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    <style>
        @media print {
            .no-print { display: none !important; }
            .print-break { page-break-inside: avoid; }
        }
        .category-card {
            break-inside: avoid;
        }
    </style>
</head>
<body class="bg-gray-50 font-sans">
    <div class="max-w-6xl mx-auto p-6">
        <!-- Header -->
        <div class="text-center mb-8">
            <h1 class="text-4xl font-bold text-gray-800 mb-4">
                <i class="fas fa-users text-blue-600 mr-3"></i>
                Beneficiary Planning Tool
            </h1>
            <p class="text-lg text-gray-600 max-w-3xl mx-auto">
                Organize and track all your beneficiary designations across accounts, insurance policies, and retirement plans. 
                Ensure your loved ones are properly protected and your wishes are clearly documented.
            </p>
        </div>

        <!-- Add Beneficiary Form -->
        <div class="bg-white rounded-lg shadow-lg p-6 mb-8 no-print">
            <h2 class="text-2xl font-semibold text-gray-800 mb-4">
                <i class="fas fa-plus-circle text-green-600 mr-2"></i>
                Add Beneficiary Designation
            </h2>
            
            <form id="beneficiaryForm" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Account/Policy Name</label>
                    <input type="text" id="accountName" class="w-full p-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="e.g., Chase Savings Account">
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Account Type</label>
                    <select id="accountType" class="w-full p-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                        <option value="">Select Type</option>
                        <option value="bank">Bank Account</option>
                        <option value="investment">Investment Account</option>
                        <option value="retirement">Retirement Account</option>
                        <option value="life-insurance">Life Insurance</option>
                        <option value="auto-insurance">Auto Insurance</option>
                        <option value="home-insurance">Home Insurance</option>
                        <option value="other">Other</option>
                    </select>
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Institution</label>
                    <input type="text" id="institution" class="w-full p-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="e.g., JPMorgan Chase">
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Account Number</label>
                    <input type="text" id="accountNumber" class="w-full p-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="Last 4 digits for security">
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Primary Beneficiary</label>
                    <input type="text" id="primaryBeneficiary" class="w-full p-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="Full name">
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Primary %</label>
                    <input type="number" id="primaryPercent" class="w-full p-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="100" min="0" max="100">
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Secondary Beneficiary</label>
                    <input type="text" id="secondaryBeneficiary" class="w-full p-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="Optional">
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Secondary %</label>
                    <input type="number" id="secondaryPercent" class="w-full p-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="0" min="0" max="100">
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Last Updated</label>
                    <input type="date" id="lastUpdated" class="w-full p-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                </div>
                
                <div class="md:col-span-2 lg:col-span-3">
                    <label class="block text-sm font-medium text-gray-700 mb-1">Notes</label>
                    <textarea id="notes" class="w-full p-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" rows="2" placeholder="Any additional notes or special instructions"></textarea>
                </div>
                
                <div class="md:col-span-2 lg:col-span-3">
                    <button type="submit" class="bg-blue-600 text-white px-6 py-3 rounded-md hover:bg-blue-700 transition-colors">
                        <i class="fas fa-save mr-2"></i>
                        Add Beneficiary Designation
                    </button>
                </div>
            </form>
        </div>

        <!-- Summary Dashboard -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
            <div class="bg-white rounded-lg shadow-lg p-6 text-center">
                <div class="text-3xl font-bold text-blue-600" id="totalAccounts">0</div>
                <div class="text-gray-600 mt-2">Total Accounts</div>
            </div>
            <div class="bg-white rounded-lg shadow-lg p-6 text-center">
                <div class="text-3xl font-bold text-green-600" id="completeDesignations">0</div>
                <div class="text-gray-600 mt-2">Complete Designations</div>
            </div>
            <div class="bg-white rounded-lg shadow-lg p-6 text-center">
                <div class="text-3xl font-bold text-red-600" id="needsReview">0</div>
                <div class="text-gray-600 mt-2">Needs Review</div>
            </div>
        </div>

        <!-- Beneficiary Categories -->
        <div class="space-y-8">
            <!-- Bank Accounts -->
            <div class="category-card">
                <div class="bg-white rounded-lg shadow-lg p-6">
                    <h3 class="text-2xl font-semibold text-gray-800 mb-4">
                        <i class="fas fa-university text-blue-600 mr-2"></i>
                        Bank Accounts
                    </h3>
                    <div id="bankAccounts" class="space-y-4">
                        <div class="text-gray-500 text-center py-8">No bank accounts added yet</div>
                    </div>
                </div>
            </div>

            <!-- Investment Accounts -->
            <div class="category-card">
                <div class="bg-white rounded-lg shadow-lg p-6">
                    <h3 class="text-2xl font-semibold text-gray-800 mb-4">
                        <i class="fas fa-chart-line text-green-600 mr-2"></i>
                        Investment Accounts
                    </h3>
                    <div id="investmentAccounts" class="space-y-4">
                        <div class="text-gray-500 text-center py-8">No investment accounts added yet</div>
                    </div>
                </div>
            </div>

            <!-- Retirement Accounts -->
            <div class="category-card">
                <div class="bg-white rounded-lg shadow-lg p-6">
                    <h3 class="text-2xl font-semibold text-gray-800 mb-4">
                        <i class="fas fa-piggy-bank text-purple-600 mr-2"></i>
                        Retirement Accounts
                    </h3>
                    <div id="retirementAccounts" class="space-y-4">
                        <div class="text-gray-500 text-center py-8">No retirement accounts added yet</div>
                    </div>
                </div>
            </div>

            <!-- Life Insurance -->
            <div class="category-card">
                <div class="bg-white rounded-lg shadow-lg p-6">
                    <h3 class="text-2xl font-semibold text-gray-800 mb-4">
                        <i class="fas fa-shield-alt text-red-600 mr-2"></i>
                        Life Insurance
                    </h3>
                    <div id="lifeInsuranceAccounts" class="space-y-4">
                        <div class="text-gray-500 text-center py-8">No life insurance policies added yet</div>
                    </div>
                </div>
            </div>

            <!-- Other Insurance -->
            <div class="category-card">
                <div class="bg-white rounded-lg shadow-lg p-6">
                    <h3 class="text-2xl font-semibold text-gray-800 mb-4">
                        <i class="fas fa-car text-orange-600 mr-2"></i>
                        Other Insurance
                    </h3>
                    <div id="otherInsuranceAccounts" class="space-y-4">
                        <div class="text-gray-500 text-center py-8">No other insurance policies added yet</div>
                    </div>
                </div>
            </div>

            <!-- Other Accounts -->
            <div class="category-card">
                <div class="bg-white rounded-lg shadow-lg p-6">
                    <h3 class="text-2xl font-semibold text-gray-800 mb-4">
                        <i class="fas fa-folder text-gray-600 mr-2"></i>
                        Other Accounts
                    </h3>
                    <div id="otherAccounts" class="space-y-4">
                        <div class="text-gray-500 text-center py-8">No other accounts added yet</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Important Notes -->
        <div class="bg-yellow-50 border-l-4 border-yellow-400 p-6 mt-8">
            <h3 class="text-lg font-semibold text-yellow-800 mb-3">
                <i class="fas fa-exclamation-triangle mr-2"></i>
                Important Reminders
            </h3>
            <ul class="text-yellow-700 space-y-2">
                <li>• Review and update beneficiary designations annually or after major life events</li>
                <li>• Ensure beneficiary names match exactly with legal documents</li>
                <li>• Consider naming contingent beneficiaries for all accounts</li>
                <li>• Keep beneficiary information current with address and contact details</li>
                <li>• Coordinate beneficiary designations with your will and trust documents</li>
                <li>• Consider tax implications when designating beneficiaries</li>
            </ul>
        </div>

        <!-- Action Steps -->
        <div class="bg-blue-50 border-l-4 border-blue-400 p-6 mt-8">
            <h3 class="text-lg font-semibold text-blue-800 mb-3">
                <i class="fas fa-tasks mr-2"></i>
                Next Steps
            </h3>
            <div class="text-blue-700 space-y-2">
                <div>1. <strong>Gather Documents:</strong> Collect all account statements, insurance policies, and retirement plan documents</div>
                <div>2. <strong>Contact Institutions:</strong> Verify current beneficiary information with each financial institution</div>
                <div>3. <strong>Update Forms:</strong> Complete new beneficiary designation forms where needed</div>
                <div>4. <strong>Review Regularly:</strong> Set annual reminders to review and update beneficiary information</div>
                <div>5. <strong>Coordinate with Estate Plan:</strong> Ensure beneficiary designations align with your overall estate plan</div>
            </div>
        </div>

        <!-- Footer -->
        <div class="text-center mt-12 text-gray-600">
            <p class="text-sm">
                This tool helps organize your beneficiary information for planning purposes. 
                Always consult with qualified financial and legal professionals for personalized advice.
            </p>
            <p class="text-sm mt-2">
                <strong>RetireSafe.ly</strong> - Your trusted partner in retirement planning
            </p>
        </div>
    </div>

    <script>
        class BeneficiaryTracker {
            constructor() {
                this.beneficiaries = JSON.parse(localStorage.getItem('beneficiaries')) || [];
                this.init();
            }

            init() {
                this.loadBeneficiaries();
                this.updateSummary();
                this.setupEventListeners();
                this.setTodayDate();
            }

            setTodayDate() {
                const today = new Date().toISOString().split('T')[0];
                document.getElementById('lastUpdated').value = today;
            }

            setupEventListeners() {
                document.getElementById('beneficiaryForm').addEventListener('submit', (e) => {
                    e.preventDefault();
                    this.addBeneficiary();
                });
            }

            addBeneficiary() {
                const formData = {
                    id: Date.now(),
                    accountName: document.getElementById('accountName').value,
                    accountType: document.getElementById('accountType').value,
                    institution: document.getElementById('institution').value,
                    accountNumber: document.getElementById('accountNumber').value,
                    primaryBeneficiary: document.getElementById('primaryBeneficiary').value,
                    primaryPercent: document.getElementById('primaryPercent').value || 100,
                    secondaryBeneficiary: document.getElementById('secondaryBeneficiary').value,
                    secondaryPercent: document.getElementById('secondaryPercent').value || 0,
                    lastUpdated: document.getElementById('lastUpdated').value,
                    notes: document.getElementById('notes').value
                };

                if (!formData.accountName || !formData.accountType || !formData.primaryBeneficiary) {
                    alert('Please fill in all required fields');
                    return;
                }

                this.beneficiaries.push(formData);
                this.saveBeneficiaries();
                this.loadBeneficiaries();
                this.updateSummary();
                this.clearForm();
            }

            clearForm() {
                document.getElementById('beneficiaryForm').reset();
                this.setTodayDate();
            }

            removeBeneficiary(id) {
                this.beneficiaries = this.beneficiaries.filter(b => b.id !== id);
                this.saveBeneficiaries();
                this.loadBeneficiaries();
                this.updateSummary();
            }

            saveBeneficiaries() {
                localStorage.setItem('beneficiaries', JSON.stringify(this.beneficiaries));
            }

            loadBeneficiaries() {
                const categories = {
                    bank: 'bankAccounts',
                    investment: 'investmentAccounts',
                    retirement: 'retirementAccounts',
                    'life-insurance': 'lifeInsuranceAccounts',
                    'auto-insurance': 'otherInsuranceAccounts',
                    'home-insurance': 'otherInsuranceAccounts',
                    other: 'otherAccounts'
                };

                // Clear all categories
                Object.values(categories).forEach(categoryId => {
                    const element = document.getElementById(categoryId);
                    if (element) {
                        element.innerHTML = '';
                    }
                });

                // Group beneficiaries by category
                const grouped = {};
                this.beneficiaries.forEach(beneficiary => {
                    const category = categories[beneficiary.accountType] || 'otherAccounts';
                    if (!grouped[category]) {
                        grouped[category] = [];
                    }
                    grouped[category].push(beneficiary);
                });

                // Render each category
                Object.keys(categories).forEach(type => {
                    const categoryId = categories[type];
                    const element = document.getElementById(categoryId);
                    if (element) {
                        const beneficiariesInCategory = grouped[categoryId] || [];
                        if (beneficiariesInCategory.length === 0) {
                            element.innerHTML = '<div class="text-gray-500 text-center py-8">No accounts added yet</div>';
                        } else {
                            element.innerHTML = beneficiariesInCategory.map(b => this.renderBeneficiary(b)).join('');
                        }
                    }
                });
            }

            renderBeneficiary(beneficiary) {
                const isComplete = beneficiary.primaryBeneficiary && beneficiary.lastUpdated;
                const needsReview = this.needsReview(beneficiary.lastUpdated);
                const statusColor = isComplete ? (needsReview ? 'yellow' : 'green') : 'red';
                const statusText = isComplete ? (needsReview ? 'Needs Review' : 'Complete') : 'Incomplete';

                return `
                    <div class="border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow">
                        <div class="flex justify-between items-start mb-3">
                            <div>
                                <h4 class="font-semibold text-lg text-gray-800">${beneficiary.accountName}</h4>
                                <p class="text-gray-600">${beneficiary.institution}</p>
                                <p class="text-sm text-gray-500">Account: ***${beneficiary.accountNumber}</p>
                            </div>
                            <div class="text-right">
                                <span class="inline-block px-3 py-1 rounded-full text-sm bg-${statusColor}-100 text-${statusColor}-800">
                                    ${statusText}
                                </span>
                                <button onclick="tracker.removeBeneficiary(${beneficiary.id})" 
                                        class="ml-2 text-red-500 hover:text-red-700 no-print">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </div>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
                            <div>
                                <strong>Primary Beneficiary:</strong><br>
                                ${beneficiary.primaryBeneficiary} (${beneficiary.primaryPercent}%)
                            </div>
                            ${beneficiary.secondaryBeneficiary ? `
                                <div>
                                    <strong>Secondary Beneficiary:</strong><br>
                                    ${beneficiary.secondaryBeneficiary} (${beneficiary.secondaryPercent}%)
                                </div>
                            ` : ''}
                            <div>
                                <strong>Last Updated:</strong><br>
                                ${new Date(beneficiary.lastUpdated).toLocaleDateString()}
                            </div>
                        </div>
                        
                        ${beneficiary.notes ? `
                            <div class="mt-3 p-3 bg-gray-50 rounded text-sm">
                                <strong>Notes:</strong> ${beneficiary.notes}
                            </div>
                        ` : ''}
                    </div>
                `;
            }

            needsReview(lastUpdated) {
                if (!lastUpdated) return true;
                const oneYearAgo = new Date();
                oneYearAgo.setFullYear(oneYearAgo.getFullYear() - 1);
                return new Date(lastUpdated) < oneYearAgo;
            }

            updateSummary() {
                const total = this.beneficiaries.length;
                const complete = this.beneficiaries.filter(b => b.primaryBeneficiary && b.lastUpdated).length;
                const needsReview = this.beneficiaries.filter(b => this.needsReview(b.lastUpdated)).length;

                document.getElementById('totalAccounts').textContent = total;
                document.getElementById('completeDesignations').textContent = complete;
                document.getElementById('needsReview').textContent = needsReview;
            }
        }

        // Initialize the tracker
        const tracker = new BeneficiaryTracker();
    </script>
</body>
</html>
